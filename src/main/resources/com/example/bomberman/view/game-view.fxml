<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.bomberman.controller.GameController"
            styleClass="root">

  <!-- HUD style Bomberman classique en haut -->
  <top>
    <VBox spacing="0">
      <!-- Barre d'informations avec icÃ´nes -->
      <HBox styleClass="hud-container" alignment="CENTER" spacing="10">
        <!-- Joueur 1 -->
        <HBox styleClass="hud-item" alignment="CENTER">
          <Label styleClass="hud-icon" text="ðŸ‘¤" />
          <Label styleClass="player1-name" text="P1" />
        </HBox>
        
        <!-- Bombes Joueur 1 -->
        <HBox styleClass="hud-item" alignment="CENTER">
          <Label styleClass="hud-icon" text="ðŸ’£" />
          <Label fx:id="player1BombsLabel" styleClass="hud-value" text="0" />
        </HBox>
        
        <!-- Temps -->
        <Region HBox.hgrow="ALWAYS" />
        <Label fx:id="timerLabel" styleClass="timer-display" text="1:41" />
        <Region HBox.hgrow="ALWAYS" />
        
        <!-- Bombes Joueur 2 -->
        <HBox styleClass="hud-item" alignment="CENTER">
          <Label styleClass="hud-icon" text="ðŸ’£" />
          <Label fx:id="player2BombsLabel" styleClass="hud-value" text="0" />
        </HBox>
        
        <!-- Joueur 2 -->
        <HBox styleClass="hud-item" alignment="CENTER">
          <Label styleClass="player2-name" text="P2" />
          <Label styleClass="hud-icon" text="ðŸ‘¤" />
        </HBox>
      </HBox>
      
      <!-- Barre de statut du jeu -->
      <HBox fx:id="gameStatusBar" styleClass="game-header" alignment="CENTER">
        <Label fx:id="gameStatusLabel" text="En cours" />
      </HBox>
    </VBox>
  </top>

  <!-- Centre avec le canvas de jeu -->
  <center>
    <StackPane styleClass="canvas-container">
      <Canvas fx:id="gameCanvas" height="520.0" width="600.0"
              onKeyPressed="#handleKeyPressed"
              onKeyReleased="#handleKeyReleased"
              styleClass="game-canvas" />
              
      <!-- Panneau de fin de jeu (invisible par dÃ©faut) -->
      <VBox fx:id="gameOverPanel" alignment="CENTER" spacing="20" visible="false"
            styleClass="game-over-panel">
        <Label text="PARTIE TERMINÃ‰E" styleClass="game-over-title" />
        <Label fx:id="winnerLabel" text="Joueur X gagne!" styleClass="winner-name" />
        <Label fx:id="finalScoreLabel" text="Score: 0 - 0" styleClass="final-score" />
        <HBox alignment="CENTER" spacing="20">
          <Button text="Rejouer" onAction="#restartGame" styleClass="control-button restart-button" />
          <Button text="Menu Principal" onAction="#returnToMainMenu" styleClass="control-button quit-button" />
        </HBox>
      </VBox>
    </StackPane>
  </center>

  <!-- Panneau latÃ©ral avec informations dÃ©taillÃ©es -->
  <right>
    <VBox fx:id="gameInfoPanel" spacing="10" prefWidth="180" styleClass="info-panel">
      <padding>
        <Insets top="10" bottom="10" left="10" right="10" />
      </padding>

      <!-- Informations des joueurs -->
      <VBox spacing="10">
        <!-- Joueur 1 -->
        <VBox spacing="5" styleClass="player-info player1-info">
          <Label fx:id="player1InfoLabel" text="Joueur 1" styleClass="player-name player1-name" />
          <HBox alignment="CENTER_LEFT" spacing="5">
            <Label text="Vies:" styleClass="game-info" />
            <Label fx:id="player1LivesLabel" text="3" styleClass="hud-value" />
          </HBox>
          <HBox alignment="CENTER_LEFT" spacing="5">
            <Label text="Bombes:" styleClass="game-info" />
            <Label fx:id="player1BombsInfoLabel" text="1" styleClass="hud-value" />
          </HBox>
          <HBox alignment="CENTER_LEFT" spacing="5">
            <Label text="PortÃ©e:" styleClass="game-info" />
            <Label fx:id="player1RangeLabel" text="1" styleClass="hud-value" />
          </HBox>
          <HBox alignment="CENTER_LEFT" spacing="5">
            <Label text="Vitesse:" styleClass="game-info" />
            <Label fx:id="player1SpeedLabel" text="1" styleClass="hud-value" />
          </HBox>
        </VBox>

        <Separator />

        <!-- Joueur 2 -->
        <VBox spacing="5" styleClass="player-info player2-info">
          <Label fx:id="player2InfoLabel" text="Joueur 2" styleClass="player-name player2-name" />
          <HBox alignment="CENTER_LEFT" spacing="5">
            <Label text="Vies:" styleClass="game-info" />
            <Label fx:id="player2LivesLabel" text="3" styleClass="hud-value" />
          </HBox>
          <HBox alignment="CENTER_LEFT" spacing="5">
            <Label text="Bombes:" styleClass="game-info" />
            <Label fx:id="player2BombsInfoLabel" text="1" styleClass="hud-value" />
          </HBox>
          <HBox alignment="CENTER_LEFT" spacing="5">
            <Label text="PortÃ©e:" styleClass="game-info" />
            <Label fx:id="player2RangeLabel" text="1" styleClass="hud-value" />
          </HBox>
          <HBox alignment="CENTER_LEFT" spacing="5">
            <Label text="Vitesse:" styleClass="game-info" />
            <Label fx:id="player2SpeedLabel" text="1" styleClass="hud-value" />
          </HBox>
        </VBox>
      </VBox>

      <Separator />

      <!-- LÃ©gende des power-ups -->
      <VBox spacing="5" styleClass="legend-section">
        <Label text="Power-ups" styleClass="section-title" />
        <HBox spacing="5">
          <Label text="ðŸ§¡" styleClass="power-up-icon" />
          <Label text="Plus de bombes" styleClass="game-info" />
        </HBox>
        <HBox spacing="5">
          <Label text="ðŸ”´" styleClass="power-up-icon" />
          <Label text="Plus de portÃ©e" styleClass="game-info" />
        </HBox>
        <HBox spacing="5">
          <Label text="ðŸ”µ" styleClass="power-up-icon" />
          <Label text="Plus de vitesse" styleClass="game-info" />
        </HBox>
        <HBox spacing="5">
          <Label text="ðŸŸ¢" styleClass="power-up-icon" />
          <Label text="Pousser bombes" styleClass="game-info" />
        </HBox>
      </VBox>

      <Region VBox.vgrow="ALWAYS" />

      <!-- Boutons de contrÃ´le du jeu -->
      <VBox spacing="10" alignment="CENTER">
        <Button text="Pause" onAction="#togglePause" styleClass="control-button pause-button" />
        <Button text="Quitter" onAction="#returnToMainMenu" styleClass="control-button quit-button" />
      </VBox>
    </VBox>
  </right>

</BorderPane>