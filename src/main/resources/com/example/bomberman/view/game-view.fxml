<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.bomberman.controller.GameController"
            styleClass="root">

  <!-- En-tÃªte avec informations du jeu -->
  <top>
    <VBox styleClass="game-header">
      <padding>
        <Insets top="10" bottom="10" left="20" right="20" />
      </padding>

      <!-- Titre et statut -->
      <HBox alignment="CENTER" spacing="20">
        <Label text="Super Bomberman" styleClass="game-title">
          <font>
            <Font name="System Bold" size="20.0" />
          </font>
        </Label>

        <Label fx:id="gameStatusLabel" text="En cours" styleClass="game-status">
          <font>
            <Font name="System Bold" size="16.0" />
          </font>
        </Label>

        <Region HBox.hgrow="ALWAYS" />
        
        <!-- Timer du jeu -->
        <Label fx:id="timerLabel" text="00:00" styleClass="timer-display" />
      </HBox>

      <!-- Informations des joueurs -->
      <HBox alignment="CENTER" spacing="40" styleClass="players-info">
        <VBox alignment="CENTER" spacing="5" styleClass="player-info player1-info">
          <Label fx:id="player1InfoLabel" text="Joueur 1 - Vies: 3" styleClass="player-name player1-name">
            <font>
              <Font name="System Bold" size="14.0" />
            </font>
          </Label>
          <ProgressBar fx:id="player1HealthBar" progress="1.0" prefWidth="150"
                       styleClass="health-bar player1-health" />
          <HBox fx:id="player1PowerUpsBox" alignment="CENTER" spacing="5" />
        </VBox>

        <Label text="VS" styleClass="vs-label">
          <font>
            <Font name="System Bold" size="18.0" />
          </font>
        </Label>

        <VBox alignment="CENTER" spacing="5" styleClass="player-info player2-info">
          <Label fx:id="player2InfoLabel" text="Joueur 2 - Vies: 3" styleClass="player-name player2-name">
            <font>
              <Font name="System Bold" size="14.0" />
            </font>
          </Label>
          <ProgressBar fx:id="player2HealthBar" progress="1.0" prefWidth="150"
                       styleClass="health-bar player2-health" />
          <HBox fx:id="player2PowerUpsBox" alignment="CENTER" spacing="5" />
        </VBox>
      </HBox>
    </VBox>
  </top>

  <!-- Centre avec le canvas de jeu -->
  <center>
    <StackPane styleClass="canvas-container">
      <Canvas fx:id="gameCanvas" height="520.0" width="600.0"
              onKeyPressed="#handleKeyPressed"
              onKeyReleased="#handleKeyReleased"
              styleClass="game-canvas" />
              
      <!-- Panneau de fin de jeu (invisible par dÃ©faut) -->
      <VBox fx:id="gameOverPanel" alignment="CENTER" spacing="20" visible="false"
            styleClass="game-over-panel">
        <Label text="PARTIE TERMINÃ‰E" styleClass="game-over-title" />
        <Label fx:id="winnerLabel" text="Joueur X gagne!" styleClass="winner-name" />
        <Label fx:id="finalScoreLabel" text="Score: 0 - 0" styleClass="final-score" />
        <HBox alignment="CENTER" spacing="20">
          <Button text="Rejouer" onAction="#restartGame" styleClass="control-button restart-button" />
          <Button text="Menu Principal" onAction="#returnToMainMenu" styleClass="control-button quit-button" />
        </HBox>
      </VBox>
    </StackPane>
  </center>

  <!-- Panneau latÃ©ral avec informations dÃ©taillÃ©es -->
  <right>
    <VBox fx:id="gameInfoPanel" spacing="15" prefWidth="200" styleClass="info-panel">
      <padding>
        <Insets top="20" bottom="20" left="15" right="15" />
      </padding>

      <Label text="Informations" styleClass="panel-title">
        <font>
          <Font name="System Bold" size="16.0" />
        </font>
      </Label>

      <Separator />

      <!-- Power-ups du joueur 1 -->
      <VBox spacing="5" styleClass="player-details">
        <Label text="Joueur 1 - Power-ups" styleClass="section-title">
          <font>
            <Font name="System Bold" size="12.0" />
          </font>
        </Label>
        <Label fx:id="player1PowerUpsLabel" text="Aucun power-up" styleClass="info-text game-info"
               wrapText="true" />
      </VBox>

      <Separator />

      <!-- Power-ups du joueur 2 -->
      <VBox spacing="5" styleClass="player-details">
        <Label text="Joueur 2 - Power-ups" styleClass="section-title">
          <font>
            <Font name="System Bold" size="12.0" />
          </font>
        </Label>
        <Label fx:id="player2PowerUpsLabel" text="Aucun power-up" styleClass="info-text game-info"
               wrapText="true" />
      </VBox>

      <Separator />

      <!-- ContrÃ´les -->
      <VBox spacing="5" styleClass="controls-section">
        <Label text="ContrÃ´les" styleClass="section-title">
          <font>
            <Font name="System Bold" size="12.0" />
          </font>
        </Label>

        <Label text="Joueur 1:" styleClass="player1-name" />
        <Label text="â€¢ ZQSD: DÃ©placement" styleClass="game-info" />
        <Label text="â€¢ A: Placer bombe" styleClass="game-info" />
        <Label text="â€¢ E: Pouvoir spÃ©cial" styleClass="game-info" />

        <Label text="Joueur 2:" styleClass="player2-name" />
        <Label text="â€¢ FlÃ¨ches: DÃ©placement" styleClass="game-info" />
        <Label text="â€¢ Espace: Placer bombe" styleClass="game-info" />
        <Label text="â€¢ Ctrl: Pouvoir spÃ©cial" styleClass="game-info" />

        <Label text="Autres:" styleClass="section-title" />
        <Label text="â€¢ Ã‰chap: Pause" styleClass="game-info" />
      </VBox>

      <Region VBox.vgrow="ALWAYS" />

      <!-- Boutons de contrÃ´le du jeu -->
      <VBox spacing="10" alignment="CENTER">
        <Button text="Pause" onAction="#togglePause" styleClass="control-button pause-button" />
        <Button text="Quitter" onAction="#returnToMainMenu" styleClass="control-button quit-button" />
      </VBox>

      <!-- LÃ©gende des power-ups -->
      <VBox spacing="5" styleClass="legend-section">
        <Label text="Power-ups" styleClass="section-title">
          <font>
            <Font name="System Bold" size="12.0" />
          </font>
        </Label>

        <Label text="ðŸ§¡ B+: Plus de bombes" styleClass="game-info" />
        <Label text="ðŸ”´ F+: Plus de portÃ©e" styleClass="game-info" />
        <Label text="ðŸ”µ S+: Plus de vitesse" styleClass="game-info" />
        <Label text="ðŸŸ¢ K: Pousser bombes" styleClass="game-info" />
        <Label text="ðŸŸ£ ðŸ’€: MalÃ©diction" styleClass="game-info" />
      </VBox>
    </VBox>
  </right>

</BorderPane>