<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import javafx.scene.text.Font?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.canvas.Canvas?>
<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.bomberman.controller.LevelEditorController"
            styleClass="level-editor">

    <!-- En-tÃªte avec titre et boutons principaux -->
    <top>
        <VBox styleClass="editor-header">
            <padding>
                <Insets top="10" bottom="10" left="20" right="20" />
            </padding>

            <HBox alignment="CENTER" spacing="20">
                <Label text="Ã‰diteur de Niveaux" styleClass="editor-title">
                    <font>
                        <Font name="System Bold" size="24.0" />
                    </font>
                </Label>

                <Region HBox.hgrow="ALWAYS" />

                <Button fx:id="returnButton" text="Retour au menu" styleClass="action-button" />
                <Button fx:id="newButton" text="Nouveau" styleClass="action-button" />
                <Button fx:id="loadButton" text="Charger" styleClass="action-button" />
                <Button fx:id="saveButton" text="Sauvegarder" styleClass="primary-button" />
                <Button fx:id="testButton" text="Tester" styleClass="secondary-button" />
            </HBox>

            <!-- Barre d'outils -->
            <HBox alignment="CENTER" spacing="15" styleClass="toolbar">
                <padding>
                    <Insets top="10" />
                </padding>

                <Label text="Outils:" styleClass="toolbar-label">
                    <font>
                        <Font name="System Bold" size="14.0" />
                    </font>
                </Label>

                <!-- DÃ©claration du ToggleGroup en dehors des nÅ“uds visuels -->
                <fx:define>
                    <ToggleGroup fx:id="toolGroup" />
                </fx:define>

                <ToggleButton fx:id="emptyTool" toggleGroup="$toolGroup"
                             styleClass="tool-button, empty-tool">
                    <tooltip>
                        <Tooltip text="Vide" />
                    </tooltip>
                </ToggleButton>
                <ToggleButton fx:id="wallTool" toggleGroup="$toolGroup"
                             styleClass="tool-button, wall-tool">
                    <tooltip>
                        <Tooltip text="Mur indestructible" />
                    </tooltip>
                </ToggleButton>
                <ToggleButton fx:id="destructibleWallTool" toggleGroup="$toolGroup"
                             styleClass="tool-button, destructible-wall-tool">
                    <tooltip>
                        <Tooltip text="Mur destructible" />
                    </tooltip>
                </ToggleButton>
                <ToggleButton fx:id="player1SpawnTool" toggleGroup="$toolGroup"
                             styleClass="tool-button, player1-tool">
                    <tooltip>
                        <Tooltip text="Spawn Joueur 1" />
                    </tooltip>
                </ToggleButton>
                <ToggleButton fx:id="player2SpawnTool" toggleGroup="$toolGroup"
                             styleClass="tool-button, player2-tool">
                    <tooltip>
                        <Tooltip text="Spawn Joueur 2" />
                    </tooltip>
                </ToggleButton>

                <Separator orientation="VERTICAL" />
                
                <!-- Bouton pour placer des murs alÃ©atoirement -->
                <Button fx:id="randomWallsButton" text="Murs AlÃ©atoires" styleClass="action-button" />
                
                <Separator orientation="VERTICAL" />

                <Label text="Dimensions:" styleClass="toolbar-label" />
                <Label text="Largeur:" />
                <Spinner fx:id="widthSpinner" prefWidth="80" styleClass="dimension-spinner" />
                <Label text="Hauteur:" />
                <Spinner fx:id="heightSpinner" prefWidth="80" styleClass="dimension-spinner" />
                <Label fx:id="dimensionsLabel" text="Dimensions: 15 x 13" styleClass="info-label" />
            </HBox>
        </VBox>
    </top>

    <!-- Centre avec le canvas d'Ã©dition -->
    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true" styleClass="editor-scroll">
            <VBox alignment="CENTER" styleClass="canvas-container">
                <padding>
                    <Insets top="20" bottom="20" left="20" right="20" />
                </padding>

                <Canvas fx:id="editorCanvas" width="450" height="390"
                        styleClass="editor-canvas" />
            </VBox>
        </ScrollPane>
    </center>

    <!-- Panneau latÃ©ral avec aide et lÃ©gende -->
    <right>
        <VBox spacing="15" prefWidth="250" styleClass="help-panel">
            <padding>
                <Insets top="20" bottom="20" left="15" right="15" />
            </padding>

            <Label text="Aide" styleClass="panel-title">
                <font>
                    <Font name="System Bold" size="16.0" />
                </font>
            </Label>

            <Separator />

            <!-- Instructions -->
            <VBox spacing="10" styleClass="instructions">
                <Label text="Instructions:" styleClass="section-subtitle">
                    <font>
                        <Font name="System Bold" size="12.0" />
                    </font>
                </Label>

                <Label text="â€¢ SÃ©lectionnez un outil dans la barre d'outils"
                       styleClass="instruction-text" wrapText="true" />
                <Label text="â€¢ Cliquez sur le canvas pour placer/modifier"
                       styleClass="instruction-text" wrapText="true" />
                <Label text="â€¢ Maintenez et glissez pour peindre"
                       styleClass="instruction-text" wrapText="true" />
                <Label text="â€¢ Clic droit pour ouvrir le menu de sÃ©lection d'outil"
                       styleClass="instruction-text" wrapText="true" />
                <Label text="â€¢ 'Murs AlÃ©atoires' place des murs destructibles alÃ©atoirement"
                       styleClass="instruction-text" wrapText="true" />
                <Label text="â€¢ Les bordures et murs fixes ne peuvent pas Ãªtre modifiÃ©s"
                       styleClass="instruction-text" wrapText="true" />
            </VBox>

            <Separator />

            <!-- LÃ©gende -->
            <VBox spacing="10" styleClass="legend">
                <Label text="LÃ©gende:" styleClass="section-subtitle">
                    <font>
                        <Font name="System Bold" size="12.0" />
                    </font>
                </Label>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸŸ©" styleClass="legend-icon" />
                    <Label text="Case vide" styleClass="legend-text" />
                </HBox>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="â¬›" styleClass="legend-icon" />
                    <Label text="Mur indestructible" styleClass="legend-text" />
                </HBox>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸŸ«" styleClass="legend-icon" />
                    <Label text="Mur destructible" styleClass="legend-text" />
                </HBox>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸ”µ" styleClass="legend-icon" />
                    <Label text="Spawn Joueur 1" styleClass="legend-text" />
                </HBox>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸ”´" styleClass="legend-icon" />
                    <Label text="Spawn Joueur 2" styleClass="legend-text" />
                </HBox>
            </VBox>

            <Separator />

            <!-- Conseils -->
            <VBox spacing="10" styleClass="tips">
                <Label text="Conseils:" styleClass="section-subtitle">
                    <font>
                        <Font name="System Bold" size="12.0" />
                    </font>
                </Label>

                <Label text="â€¢ Gardez des chemins ouverts entre les zones"
                       styleClass="tip-text" wrapText="true" />
                <Label text="â€¢ Placez des murs destructibles pour crÃ©er des power-ups"
                       styleClass="tip-text" wrapText="true" />
                <Label text="â€¢ Ã‰vitez les zones trop ouvertes ou fermÃ©es"
                       styleClass="tip-text" wrapText="true" />
                <Label text="â€¢ Testez votre niveau avant de le sauvegarder"
                       styleClass="tip-text" wrapText="true" />
            </VBox>

            <Region VBox.vgrow="ALWAYS" />
        </VBox>
    </right>

</BorderPane>